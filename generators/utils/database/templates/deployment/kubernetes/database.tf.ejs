
resource "random_password" "<%= varify(packageName) %>" {
    length = 32
}

resource "scaleway_rdb_user" "<%= varify(packageName) %>" {
    instance_id = data.scaleway_rdb_instance.main.id
    name        = "<%= varify(projectName) %>_<%= varify(packageName) %>"
    password    = random_password.<%= varify(packageName) %>.result
}

resource "scaleway_rdb_database" "<%= varify(packageName) %>" {
    instance_id = data.scaleway_rdb_instance.main.id
    name        = "<%= varify(projectName) %>_<%= varify(packageName) %>"
}

resource "scaleway_rdb_privilege" "<%= varify(packageName) %>" {
    instance_id   = data.scaleway_rdb_instance.main.id
    user_name     = scaleway_rdb_user.<%= varify(packageName) %>.name
    database_name = scaleway_rdb_database.<%= varify(packageName) %>.name
    permission    = "all"
}
